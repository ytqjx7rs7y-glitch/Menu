<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>ูุงุฆูุฉ ุงูุทูุจุงุช - ูุงุดูุฑ ุณุญุงุจู</title>

<!-- ๐ ุฅุถุงูุฉ ููุชุจุงุช Firebase ุงูุถุฑูุฑูุฉ (App ู Firestore) -->
<!-- Firestore ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุณุญุงุจูุฉ ุงูุชู ุณุชุฎุฒู ุงูููุงุชูุฑ -->
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>

<style>
    /* ุชูุณููุงุช CSS ูุถูุงู ูุธูุฑ ุฌูุฏ ุนูู ุงูุฌูุงู */
    body {
        font-family: sans-serif;
        background: #f8f8f8;
        padding: 20px;
        max-width: 600px;
        margin: 0 auto;
    }
    h1 {
        text-align: center;
        color: #333;
    }
    .section {
        margin-top: 25px;
        background: #fff;
        padding: 15px;
        border-radius: 10px;
        border: 1px solid #ddd;
    }
    .item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 10px 0;
    }
    .item button {
        padding: 6px 12px;
        font-size: 18px;
        background: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    #totalBox {
        margin-top: 25px;
        background: #f1f1f1;
        padding: 15px;
        border-radius: 10px;
        font-size: 22px;
        text-align: center;
        border: 1px solid #ccc;
    }
    /* ุชูุณูู ุฒุฑ ุชู ุงูุทูุจ */
    #doneBtn {
        display: block;
        width: 100%;
        padding: 15px;
        margin-top: 20px;
        background: #ff6666;
        border: none;
        color: white;
        font-size: 20px;
        border-radius: 10px;
        cursor: pointer;
        transition: background 0.3s;
    }
    #doneBtn:hover {
        background: #e55353;
    }
    /* ุฑุงุจุท ุณุฑูุน ูุตูุญุฉ ุงูููุงุชูุฑ */
    .quick-link {
        display: block;
        text-align: center;
        margin-top: 15px;
        font-size: 16px;
        color: #4CAF50;
    }
</style>

</head>

<body>

<h1>ูุงุฆูุฉ ุงูุทูุจุงุช</h1>

<!-- ูุณู ุงูุจุฑุฌุฑ -->
<div class="section">
    <h2>ุจุฑุฌุฑ</h2>
    <div class="item">
        <span>ููุจู - ูขูจ ุฑูุงู</span>
        <div>
            <button onclick="decrease('maple')">โ</button>
            <span id="maple">0</span>
            <button onclick="increase('maple', 28)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ููุงุณูู - ูขูค ุฑูุงู</span>
        <div>
            <button onclick="decrease('classic')">โ</button>
            <span id="classic">0</span>
            <button onclick="increase('classic', 24)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ููู ุณูู - ูขูฅ ุฑูุงู</span>
        <div>
            <button onclick="decrease('coleslaw')">โ</button>
            <span id="coleslaw">0</span>
            <button onclick="increase('coleslaw', 25)">+</button>
        </div>
    </div>
</div>

<!-- ุฃุตูุงู ุฌุงูุจูุฉ -->
<div class="section">
    <h2>ุฃุตูุงู ุฌุงูุจูุฉ</h2>
    <div class="item">
        <span>ุณุชุฑูุจุณ ูฆ ุญุจุงุช - ูขูฃ ุฑูุงู</span>
        <div>
            <button onclick="decrease('strips6')">โ</button>
            <span id="strips6">0</span>
            <button onclick="increase('strips6', 28)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุณุชุฑูุจุณ ูฃ ุญุจุงุช - ูกูฆ ุฑูุงู</span>
        <div>
            <button onclick="decrease('strips3')">โ</button>
            <span id="strips3">0</span>
            <button onclick="increase('strips3', 16)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุจุงูุชุณ ูจ ุญุจุงุช - ูกูฆ ุฑูุงู</span>
        <div>
            <button onclick="decrease('bites8')">โ</button>
            <span id="bites8">0</span>
            <button onclick="increase('bites8', 16)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุจุงูุชุณ ูค ุญุจุงุช - ูจ ุฑูุงู</span>
        <div>
            <button onclick="decrease('bites4')">โ</button>
            <span id="bites4">0</span>
            <button onclick="increase('bites4', 8)">+</button>
        </div>
    </div>
</div>

    <!-- ๐ ุงููุณู ุงูุซุงูู: ุฃุตูุงู ุงููุฑุงูุฒ (ุฌุฏูุฏ) -->
<div class="section">
    <h2>ุฃุตูุงู ูุฑุงูุฒ ูุชุณุงูู</h2>
    <div class="item">
        <span>ููุฏุฏ ูุฑุงูุฒ - ูขูข ุฑูุงู</span>
        <div>
            <button onclick="decrease('loaded')">โ</button>
            <span id="loaded">0</span>
            <button onclick="increase('loaded', 22)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ูุฑุงูุฒ - ูง ุฑูุงู</span>
        <div>
            <button onclick="decrease('fries')">โ</button>
            <span id="fries">0</span>
            <button onclick="increase('fries', 7)">+</button>
        </div>
    </div>
     <div class="item">
        <span>ุณุจุงูุณู ุชุดูุฒ ูุฑุงูุฒ - ูกูฆ ุฑูุงู</span>
        <div>
            <button onclick="decrease('fries')">โ</button>
            <span id="fries">0</span>
            <button onclick="increase('fries', 7)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุจุทุงุทุณ ุชุณุงูู - ูกูก ุฑูุงู</span>
        <div>
            <button onclick="decrease('chips')">โ</button>
            <span id="chips">0</span>
            <button onclick="increase('chips', 11)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุจุทุงุทุณ ุชุณุงูู ุจุงูุฏุฌุงุฌ - ูกูฆ ุฑูุงู</span>
        <div>
            <button onclick="decrease('chipsChicken')">โ</button>
            <span id="chipsChicken">0</span>
            <button onclick="increase('chipsChicken', 16)">+</button>
        </div>
    </div>
</div>

<!-- ุตูุต -->
<div class="section">
    <h2>ุตูุต</h2>
    <div class="item">
        <span>ุฑุงูุด ุตูุต - ูฃ ุฑูุงู</span>
        <div>
            <button onclick="decrease('ranch')">โ</button>
            <span id="ranch">0</span>
            <button onclick="increase('ranch', 3)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุชุดูููุฏ ุตูุต - ูฃ ุฑูุงู</span>
        <div>
            <button onclick="decrease('chknd')">โ</button>
            <span id="chknd">0</span>
            <button onclick="increase('chknd', 3)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุชุดูุฒ ุตูุต - ูฅ ุฑูุงู</span>
        <div>
            <button onclick="decrease('cheese')">โ</button>
            <span id="cheese">0</span>
            <button onclick="increase('cheese', 5)">+</button>
        </div>
    </div>
</div>

<!-- ูุดุฑูุจุงุช -->
<div class="section">
    <h2>ูุดุฑูุจุงุช</h2>
    <div class="item">
        <span>ูููุง - ูค ุฑูุงู</span>
        <div>
            <button onclick="decrease('cola')">โ</button>
            <span id="cola">0</span>
            <button onclick="increase('cola', 4)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ุณุจุฑุงูุช - ูค ุฑูุงู</span>
        <div>
            <button onclick="decrease('sprite')">โ</button>
            <span id="sprite">0</span>
            <button onclick="increase('sprite', 4)">+</button>
        </div>
    </div>
    <div class="item">
        <span>ูุงุก - ูข ุฑูุงู</span>
        <div>
            <button onclick="decrease('water')">โ</button>
            <span id="water">0</span>
            <button onclick="increase('water', 2)">+</button>
        </div>
    </div>
</div>

<!-- ุงููุฌููุน ุงูููู ููุทูุจ -->
<div id="totalBox">
    ุงููุฌููุน: <span id="total">0 ุฑูุงู</span>
</div>

<!-- ุฒุฑ ุฅุชูุงู ูุญูุธ ุงูุทูุจ. ID ุงูุฒุฑ ูู doneBtn -->
<button id="doneBtn" onclick="processOrder()">ุชู ุงูุทูุจ ูุญูุธ ุงููุงุชูุฑุฉ</button>

<!-- ุฑุงุจุท ุณุฑูุน ูุตูุญุฉ ุงูุณุฌู -->
<a href="order.html" class="quick-link">ุนุฑุถ ุณุฌู ุงูููุงุชูุฑ ุงูุณุญุงุจู</a>

<script>
// ๐ ุชููุฆุฉ Firebase ุจุงุณุชุฎุฏุงู ููุงุชูุญู ุงูุฎุงุตุฉ
const firebaseConfig = {
  apiKey: "AIzaSyB94M3Flt9fPYKUuM0DdsE4FvvyJk6MrfA",
  authDomain: "menu-9d12b.firebaseapp.com",
  projectId: "menu-9d12b",
  storageBucket: "menu-9d12b.firebasestorage.app",
  messagingSenderId: "1076348478164",
  appId: "1:1076348478164:web:5b3984659930c771401141",
  measurementId: "G-H90HNXQ9P1"
};

// ุชููุฆุฉ ุชุทุจูู Firebase
firebase.initializeApp(firebaseConfig);
// ุงูุญุตูู ุนูู ูุฑุฌุน ูุงุนุฏุฉ ุจูุงูุงุช Firestore
const db = firebase.firestore(); 

// ูุงุฆูุฉ ุงูุฃุตูุงู ูุงูุฃุณุนุงุฑ (ูุญุฏุซุฉ ุจูุงุกู ุนูู ุงูุฅุฏุฎุงูุงุช ุงูุฃุฎูุฑุฉ)
let items = {
    coleslaw: { price: 25, qty: 0 },
    maple: { price: 28, qty: 0 },
    classic: { price: 24, qty: 0 },

    strips6: { price: 28, qty: 0 }, // ุณุนุฑ 28 ุจูุงุกู ุนูู ุงูุฒุฑ
    strips3: { price: 16, qty: 0 },
    bites8: { price: 16, qty: 0 },
    bites4: { price: 8, qty: 0 },
    loaded: { price: 22, qty: 0 },
    fries: { price: 7, qty: 0 },
    chips: { price: 11, qty: 0 },

chipsChicken: { price: 16, qty: 0 },

    ranch: { price: 3, qty: 0 },
    chknd: { price: 3, qty: 0 },
    cheese: { price: 5, qty: 0 },

    cola: { price: 4, qty: 0 },
    sprite: { price: 4, qty: 0 },
    water: { price: 2, qty: 0 }
};

// ุฏุงูุฉ ุฒูุงุฏุฉ ุงููููุฉ
function increase(item, price) {
    items[item].qty++;
    document.getElementById(item).textContent = items[item].qty;
    updateTotal();
}

// ุฏุงูุฉ ุชูููู ุงููููุฉ (ูุน ุงูุชุฃูุฏ ูู ุนุฏู ุงููุฒูู ุชุญุช ุงูุตูุฑ)
function decrease(item) {
    if (items[item].qty > 0) {
        items[item].qty--;
        document.getElementById(item).textContent = items[item].qty;
        updateTotal();
    }
}

// ุฏุงูุฉ ุชุญุฏูุซ ุงููุฌููุน ุงูููู
function updateTotal() {
    let total = 0;
    for (let key in items) {
        total += items[key].price * items[key].qty;
    }
    document.getElementById("total").textContent = total + " ุฑูุงู";
}

// ุฏุงูุฉ ูุณุงุนุฏุฉ ููุญุตูู ุนูู ุงุณู ุงูุตูู ุจุดูู ูุธูู ููุญูุธ ูู ุงููุงุชูุฑุฉ
function getItemName(key) {
    switch (key) {
        case 'maple': return 'ููุจู';
        case 'classic': return 'ููุงุณูู';
        case 'coleslaw': return 'ููู ุณูู';
        case 'strips6': return 'ุณุชุฑูุจุณ ูฆ ุญุจุงุช';
        case 'strips3': return 'ุณุชุฑูุจุณ ูฃ ุญุจุงุช';
        case 'bites8': return 'ุจุงูุชุณ ูจ ุญุจุงุช';
        case 'bites4': return 'ุจุงูุชุณ ูค ุญุจุงุช';
        case 'loaded': return 'ููุฏุฏ ูุฑุงูุฒ';
        case 'fries': return 'ูุฑุงูุฒ';
        case 'chips': return 'ุจุทุงุทุณ ุชุณุงูู';
        case 'chipsChicken': return 'ุจุทุงุทุณ ุชุณุงูู ุจุงูุฏุฌุงุฌ';
        case 'ranch': return 'ุฑุงูุด ุตูุต';
        case 'chknd': return 'ุชุดูููุฏ ุตูุต';
        case 'cheese': return 'ุชุดูุฒ ุตูุต';
        case 'cola': return 'ูููุง';
        case 'sprite': return 'ุณุจุฑุงูุช';
        case 'water': return 'ูุงุก';
        default: return key;
    }
}

// ๐ ุงูุฏุงูุฉ ุงูุฑุฆูุณูุฉ ูุนูููุฉ ุงูุทูุจ ูุงูุญูุธ ุงูุณุญุงุจู
function processOrder() {
    let invoice = {
        // ุชูุณูู ุงูุชุงุฑูุฎ ููุธูุฑ ูู ุงูุณุฌู
        date: new Date().toLocaleString('ar-EG', {
            year: 'numeric',
            month: 'long',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit'
        }), 
        // ููุช ุงูุฎุงุฏู ูุถูุงู ุงูุชุฑุชูุจ ุงูุตุญูุญ ููููุงุชูุฑ
        timestamp: firebase.firestore.FieldValue.serverTimestamp(), 
        items: [],
        total: 0
    };

    let itemsFound = false; 

    // ุชุฌููุน ุงูุฃุตูุงู ุงููุทููุจุฉ
    for (let key in items) {
        if (items[key].qty > 0) {
            itemsFound = true;
            let itemName = getItemName(key); 
            
            invoice.items.push({
                name: itemName,
                qty: items[key].qty,
                price: items[key].price
            });
            invoice.total += items[key].qty * items[key].price;
        }
    }

    // ุงูุชุญูู ูู ูุฌูุฏ ุฃุตูุงู ูุจู ุงูุญูุธ
    if (!itemsFound) {
        alert("ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุตูู ูุงุญุฏ ุนูู ุงูุฃูู ูุจู ุฅุชูุงู ุงูุทูุจ.");
        return; 
    }
    
    // ๐ ุญูุธ ุงููุงุชูุฑุฉ ูู ูุฌููุนุฉ "invoices" ูู Firestore
    // ูุฐุง ูู ุงูููุฏ ุงูุฐู ูุฑุณู ุงูุจูุงูุงุช ุฅูู ุงูุณุญุงุจุฉ
    db.collection("invoices").add(invoice)
        .then(() => {
            // ุฑุณุงูุฉ ูุฌุงุญ ุงูุญูุธ
            alert(`โ ุชู ุญูุธ ุงูุทูุจ ุจูุฌุงุญ ุณุญุงุจูุงู! ุงูุฅุฌูุงูู: ${invoice.total} ุฑูุงู.`);

            // ุชุตููุฑ ุงูุนุฏุงุฏุงุช ูุงูุจูุงุก ูู ููุณ ุงูุตูุญุฉ
            for (let key in items) {
                items[key].qty = 0;
                document.getElementById(key).textContent = 0;
            }
            updateTotal();
        })
        .catch((error) => {
            // ุฑุณุงูุฉ ุฎุทุฃ ูู ุญุงู ูุดู ุงูุงุชุตุงู ุฃู ุฎุทุฃ ูู ููุงุนุฏ ุงูุฃูุงู
            console.error("ุฎุทุฃ ูู ุญูุธ ุงููุงุชูุฑุฉ ูู Firebase: ", error);
            alert("โ ุญุฏุซ ุฎุทุฃ ูู ุญูุธ ุงูุทูุจ ุณุญุงุจูุงู. ุชุฃูุฏู ูู ููุงุนุฏ ุฃูุงู Firebase.");
        });
}

// ุฑุจุท ุงูุฒุฑ ุจุงูุฏุงูุฉ processOrder
document.getElementById('doneBtn').onclick = processOrder;
</script>

</body>
</html>

